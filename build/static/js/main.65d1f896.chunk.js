(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t(14),o=t.n(a),u=t(3),i=function(e){var n=e.filteredList;return Object(c.jsx)("ul",{children:n.map((function(e,n){return Object(c.jsxs)("li",{children:[e.name," ",e.number]},n)}))})},s=function(e){return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:e.value,onChange:e.onChange})]})},l=function(e){return Object(c.jsxs)("form",{onSubmit:e.onSubmitForm,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},d=t(4),b=t.n(d),f="/api/persons",j={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e).then((function(e){return e.data}))},deletePerson:function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e}))},replace:function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))}},h=function(e){var n=e.message,t=e.type;return null===n?null:Object(c.jsx)("div",{className:t,children:n})},m=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],o=Object(r.useState)(""),d=Object(u.a)(o,2),b=d[0],f=d[1],m=Object(r.useState)(""),O=Object(u.a)(m,2),p=O[0],v=O[1],g=Object(r.useState)(""),x=Object(u.a)(g,2),w=x[0],N=x[1],C=Object(r.useState)(null),S=Object(u.a)(C,2),k=S[0],y=S[1],A=Object(r.useState)(""),D=Object(u.a)(A,2),I=D[0],P=D[1];Object(r.useEffect)((function(){console.log("effect"),j.getAll().then((function(e){a(e)}))}),[]);var T=w?t.filter((function(e){return e.name.includes(w)})):t;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(h,{message:k,type:I}),Object(c.jsx)(s,{value:w,onChange:function(e){N(e.target.value)}}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(l,{onSubmitForm:function(e){e.preventDefault();var n={name:b,number:p},c=t.findIndex((function(e){return e.name===b})),r=t.find((function(e){return e.name===b}));-1!==c?window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one"))&&j.replace(r.id,n).then((function(e){t[c]=e;var n=t.map((function(e){return e}));a(n),f(""),v(""),y("Added ".concat(e.name)),P("success"),setTimeout((function(){y(null)}),5e3)})).catch((function(e){console.log(e.response.data),y(e.response.data.error),P("error")})):j.create(n).then((function(e){a(t.concat(e)),f(""),v(""),y("Added ".concat(e.name)),P("success"),setTimeout((function(){y(null)}),5e3)})).catch((function(e){console.log(e.response.data),y(e.response.data.error),P("error")}))},newName:b,handleNameChange:function(e){f(e.target.value)},newNumber:p,handleNumberChange:function(e){v(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(i,{filteredList:T,handleDelete:function(e){var n=t.filter((function(n){return n.id!==e.id}));window.confirm("Delete ".concat(e.name))&&j.deletePerson(e.id).then((function(e){a(n)})).catch((function(t){console.log(t),y("Information of ".concat(e.name," has already been removed from server")),P("error"),setTimeout((function(){y(null)}),5e3),a(n)}))}})]})};t(37);o.a.render(Object(c.jsx)(m,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.65d1f896.chunk.js.map